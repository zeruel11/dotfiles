{
  "homepage": "https://github.com/DDoSolitary/LxRunOffline/wiki",
  "description": "Install AlpineLinux as a WSL Instance",
  "version": "3.11",
  "license": "MIT",
  "url": "https://lxrunoffline.apphb.com/download/Alpine/v3.11#/dl.tar.gz",
  "hash": "8a6c827f137058ac3e3df1125891ff5c3b62955f0b911adec26eae6ea2bbb285",
  "depends": "lxrunoffline",
  "checkver": {
    "url": "https://alpinelinux.org/downloads/",
    "regex": "Current Alpine Version <strong>([\\d.]+\\.[\\d.]+)\\.[\\d.]+"
  },
  "extract_to": "base",
  "persist": "data",
  "installer": {
    "script": [
      "$lxpath = $manifest.url -replace '://','_' -replace '#/','_' -replace '/','_'",
      "LxRunOffline.exe install -n $app -d $dir -r . -f $cachedir\\$app#$version#$lxpath"
    ]
  },
  "pre_install": [
    "Remove-Item -Recurse -Path '$dir\\base'",
    "if (Test-Path ('$persist_dir' + '\\data\\rootfs')) {",
    "Copy-Item -Recurse -Path '$persist_dir\\data\\rootfs' -Destination '$dir\\temp'",
    "}"
  ],
  "post_install": [
    "if (Test-Path ('$dir' + '\\temp')) {",
    "Move-Item -Path '$dir\\temp' -Destination '$dir\\rootfs'",
    "}",
    "$shortpath = $env:APPDATA+'\\Microsoft\\Windows\\Start Menu\\Programs\\Scoop Apps\\Alpine Linux.lnk'",
    "LxRunOffline.exe shortcut -n $app -f $shortpath"
  ],
  "uninstaller": {
    "script": ["wsl -t $app", "LxRunOffline.exe uninstall -n $app"]
  },
  "##": "'rootfs' must be a 'real' directory (at least on Windows 10 RS4)"
}
